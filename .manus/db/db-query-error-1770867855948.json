{
  "query": "-- 1. Weight Tracking Table\nCREATE TABLE IF NOT EXISTS public.weight_tracking (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    weight DECIMAL(5, 2) NOT NULL,\n    unit TEXT NOT NULL DEFAULT 'kg',\n    recorded_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_tenant_id ON public.weight_tracking(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_customer_id ON public.weight_tracking(customer_id);\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_recorded_at ON public.weight_tracking(recorded_at);\n\nALTER TABLE public.weight_tracking ENABLE ROW LEVEL SECURITY;\n\n-- 2. Products Table\nCREATE TABLE IF NOT EXISTS public.products (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    name TEXT NOT NULL,\n    description TEXT,\n    price DECIMAL(10, 2) NOT NULL,\n    stock_quantity INTEGER NOT NULL DEFAULT 0,\n    category TEXT,\n    image_url TEXT,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_products_tenant_id ON public.products(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_products_category ON public.products(category);\nCREATE INDEX IF NOT EXISTS idx_products_is_active ON public.products(is_active);\n\nALTER TABLE public.products ENABLE ROW LEVEL SECURITY;\n\n-- 3. Shop Orders Table\nCREATE TABLE IF NOT EXISTS public.shop_orders (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    total_amount DECIMAL(10, 2) NOT NULL,\n    status TEXT NOT NULL DEFAULT 'pending',\n    payment_method TEXT,\n    payment_status TEXT NOT NULL DEFAULT 'unpaid',\n    shipping_address TEXT,\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_shop_orders_tenant_id ON public.shop_orders(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_shop_orders_customer_id ON public.shop_orders(customer_id);\nCREATE INDEX IF NOT EXISTS idx_shop_orders_status ON public.shop_orders(status);\n\nALTER TABLE public.shop_orders ENABLE ROW LEVEL SECURITY;\n\n-- 4. Aftercare Records Table\nCREATE TABLE IF NOT EXISTS public.aftercare_records (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    appointment_id BIGINT REFERENCES public.appointments(id),\n    care_date TIMESTAMP WITH TIME ZONE NOT NULL,\n    care_type TEXT NOT NULL,\n    notes TEXT,\n    follow_up_required BOOLEAN NOT NULL DEFAULT false,\n    next_follow_up_date TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_tenant_id ON public.aftercare_records(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_customer_id ON public.aftercare_records(customer_id);\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_care_date ON public.aftercare_records(care_date);\n\nALTER TABLE public.aftercare_records ENABLE ROW LEVEL SECURITY;\n\n-- 5. Member Levels Table\nCREATE TABLE IF NOT EXISTS public.member_levels (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    level_name TEXT NOT NULL,\n    min_points INTEGER NOT NULL DEFAULT 0,\n    discount_percentage DECIMAL(5, 2) NOT NULL DEFAULT 0,\n    benefits TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_member_levels_tenant_id ON public.member_levels(tenant_id);\n\nALTER TABLE public.member_levels ENABLE ROW LEVEL SECURITY;\n\n-- 6. Coupons Table\nCREATE TABLE IF NOT EXISTS public.coupons (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    code TEXT NOT NULL UNIQUE,\n    discount_type TEXT NOT NULL,\n    discount_value DECIMAL(10, 2) NOT NULL,\n    min_purchase_amount DECIMAL(10, 2),\n    max_discount_amount DECIMAL(10, 2),\n    valid_from TIMESTAMP WITH TIME ZONE NOT NULL,\n    valid_until TIMESTAMP WITH TIME ZONE NOT NULL,\n    usage_limit INTEGER,\n    usage_count INTEGER NOT NULL DEFAULT 0,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_coupons_tenant_id ON public.coupons(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_coupons_code ON public.coupons(code);\nCREATE INDEX IF NOT EXISTS idx_coupons_is_active ON public.coupons(is_active);\n\nALTER TABLE public.coupons ENABLE ROW LEVEL SECURITY;\n\n-- 7. Coupon Usage Table\nCREATE TABLE IF NOT EXISTS public.coupon_usage (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    coupon_id BIGINT NOT NULL REFERENCES public.coupons(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    order_id BIGINT,\n    used_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_tenant_id ON public.coupon_usage(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_coupon_id ON public.coupon_usage(coupon_id);\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_customer_id ON public.coupon_usage(customer_id);\n\nALTER TABLE public.coupon_usage ENABLE ROW LEVEL SECURITY;\n\n-- 8. Referrals Table\nCREATE TABLE IF NOT EXISTS public.referrals (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    referrer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    referred_id BIGINT NOT NULL REFERENCES public.customers(id),\n    reward_points INTEGER NOT NULL DEFAULT 0,\n    reward_amount DECIMAL(10, 2),\n    status TEXT NOT NULL DEFAULT 'pending',\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_referrals_tenant_id ON public.referrals(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_referrals_referrer_id ON public.referrals(referrer_id);\nCREATE INDEX IF NOT EXISTS idx_referrals_referred_id ON public.referrals(referred_id);\n\nALTER TABLE public.referrals ENABLE ROW LEVEL SECURITY;\n\n-- 9. Member Promos Table\nCREATE TABLE IF NOT EXISTS public.member_promos (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    title TEXT NOT NULL,\n    description TEXT,\n    promo_type TEXT NOT NULL,\n    discount_value DECIMAL(10, 2),\n    target_member_level BIGINT REFERENCES public.member_levels(id),\n    valid_from TIMESTAMP WITH TIME ZONE NOT NULL,\n    valid_until TIMESTAMP WITH TIME ZONE NOT NULL,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_member_promos_tenant_id ON public.member_promos(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_member_promos_is_active ON public.member_promos(is_active);\n\nALTER TABLE public.member_promos ENABLE ROW LEVEL SECURITY;\n\n-- 10. Payment Methods Table\nCREATE TABLE IF NOT EXISTS public.payment_methods (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    method_name TEXT NOT NULL,\n    method_type TEXT NOT NULL,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    configuration JSONB,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_payment_methods_tenant_id ON public.payment_methods(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_payment_methods_is_active ON public.payment_methods(is_active);\n\nALTER TABLE public.payment_methods ENABLE ROW LEVEL SECURITY;\n\n-- 11. Customer Tags Table\nCREATE TABLE IF NOT EXISTS public.customer_tags (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    tag_name TEXT NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_customer_tags_tenant_id ON public.customer_tags(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_customer_tags_customer_id ON public.customer_tags(customer_id);\nCREATE INDEX IF NOT EXISTS idx_customer_tags_tag_name ON public.customer_tags(tag_name);\n\nALTER TABLE public.customer_tags ENABLE ROW LEVEL SECURITY;\n\n-- 12. Error Logs Table\nCREATE TABLE IF NOT EXISTS public.error_logs (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT REFERENCES public.tenants(id),\n    error_type TEXT NOT NULL,\n    error_message TEXT NOT NULL,\n    stack_trace TEXT,\n    user_id BIGINT,\n    request_path TEXT,\n    request_method TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_error_logs_tenant_id ON public.error_logs(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_error_logs_error_type ON public.error_logs(error_type);\nCREATE INDEX IF NOT EXISTS idx_error_logs_created_at ON public.error_logs(created_at);",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3yhrFTMwYTaZZBj.e200c1c625b3 --database AAVvDnQSgZb2QX3g6gP92w --execute -- 1. Weight Tracking Table\nCREATE TABLE IF NOT EXISTS public.weight_tracking (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    weight DECIMAL(5, 2) NOT NULL,\n    unit TEXT NOT NULL DEFAULT 'kg',\n    recorded_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_tenant_id ON public.weight_tracking(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_customer_id ON public.weight_tracking(customer_id);\nCREATE INDEX IF NOT EXISTS idx_weight_tracking_recorded_at ON public.weight_tracking(recorded_at);\n\nALTER TABLE public.weight_tracking ENABLE ROW LEVEL SECURITY;\n\n-- 2. Products Table\nCREATE TABLE IF NOT EXISTS public.products (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    name TEXT NOT NULL,\n    description TEXT,\n    price DECIMAL(10, 2) NOT NULL,\n    stock_quantity INTEGER NOT NULL DEFAULT 0,\n    category TEXT,\n    image_url TEXT,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_products_tenant_id ON public.products(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_products_category ON public.products(category);\nCREATE INDEX IF NOT EXISTS idx_products_is_active ON public.products(is_active);\n\nALTER TABLE public.products ENABLE ROW LEVEL SECURITY;\n\n-- 3. Shop Orders Table\nCREATE TABLE IF NOT EXISTS public.shop_orders (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    total_amount DECIMAL(10, 2) NOT NULL,\n    status TEXT NOT NULL DEFAULT 'pending',\n    payment_method TEXT,\n    payment_status TEXT NOT NULL DEFAULT 'unpaid',\n    shipping_address TEXT,\n    notes TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_shop_orders_tenant_id ON public.shop_orders(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_shop_orders_customer_id ON public.shop_orders(customer_id);\nCREATE INDEX IF NOT EXISTS idx_shop_orders_status ON public.shop_orders(status);\n\nALTER TABLE public.shop_orders ENABLE ROW LEVEL SECURITY;\n\n-- 4. Aftercare Records Table\nCREATE TABLE IF NOT EXISTS public.aftercare_records (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    appointment_id BIGINT REFERENCES public.appointments(id),\n    care_date TIMESTAMP WITH TIME ZONE NOT NULL,\n    care_type TEXT NOT NULL,\n    notes TEXT,\n    follow_up_required BOOLEAN NOT NULL DEFAULT false,\n    next_follow_up_date TIMESTAMP WITH TIME ZONE,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_tenant_id ON public.aftercare_records(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_customer_id ON public.aftercare_records(customer_id);\nCREATE INDEX IF NOT EXISTS idx_aftercare_records_care_date ON public.aftercare_records(care_date);\n\nALTER TABLE public.aftercare_records ENABLE ROW LEVEL SECURITY;\n\n-- 5. Member Levels Table\nCREATE TABLE IF NOT EXISTS public.member_levels (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    level_name TEXT NOT NULL,\n    min_points INTEGER NOT NULL DEFAULT 0,\n    discount_percentage DECIMAL(5, 2) NOT NULL DEFAULT 0,\n    benefits TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_member_levels_tenant_id ON public.member_levels(tenant_id);\n\nALTER TABLE public.member_levels ENABLE ROW LEVEL SECURITY;\n\n-- 6. Coupons Table\nCREATE TABLE IF NOT EXISTS public.coupons (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    code TEXT NOT NULL UNIQUE,\n    discount_type TEXT NOT NULL,\n    discount_value DECIMAL(10, 2) NOT NULL,\n    min_purchase_amount DECIMAL(10, 2),\n    max_discount_amount DECIMAL(10, 2),\n    valid_from TIMESTAMP WITH TIME ZONE NOT NULL,\n    valid_until TIMESTAMP WITH TIME ZONE NOT NULL,\n    usage_limit INTEGER,\n    usage_count INTEGER NOT NULL DEFAULT 0,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_coupons_tenant_id ON public.coupons(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_coupons_code ON public.coupons(code);\nCREATE INDEX IF NOT EXISTS idx_coupons_is_active ON public.coupons(is_active);\n\nALTER TABLE public.coupons ENABLE ROW LEVEL SECURITY;\n\n-- 7. Coupon Usage Table\nCREATE TABLE IF NOT EXISTS public.coupon_usage (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    coupon_id BIGINT NOT NULL REFERENCES public.coupons(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    order_id BIGINT,\n    used_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_tenant_id ON public.coupon_usage(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_coupon_id ON public.coupon_usage(coupon_id);\nCREATE INDEX IF NOT EXISTS idx_coupon_usage_customer_id ON public.coupon_usage(customer_id);\n\nALTER TABLE public.coupon_usage ENABLE ROW LEVEL SECURITY;\n\n-- 8. Referrals Table\nCREATE TABLE IF NOT EXISTS public.referrals (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    referrer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    referred_id BIGINT NOT NULL REFERENCES public.customers(id),\n    reward_points INTEGER NOT NULL DEFAULT 0,\n    reward_amount DECIMAL(10, 2),\n    status TEXT NOT NULL DEFAULT 'pending',\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_referrals_tenant_id ON public.referrals(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_referrals_referrer_id ON public.referrals(referrer_id);\nCREATE INDEX IF NOT EXISTS idx_referrals_referred_id ON public.referrals(referred_id);\n\nALTER TABLE public.referrals ENABLE ROW LEVEL SECURITY;\n\n-- 9. Member Promos Table\nCREATE TABLE IF NOT EXISTS public.member_promos (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    title TEXT NOT NULL,\n    description TEXT,\n    promo_type TEXT NOT NULL,\n    discount_value DECIMAL(10, 2),\n    target_member_level BIGINT REFERENCES public.member_levels(id),\n    valid_from TIMESTAMP WITH TIME ZONE NOT NULL,\n    valid_until TIMESTAMP WITH TIME ZONE NOT NULL,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_member_promos_tenant_id ON public.member_promos(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_member_promos_is_active ON public.member_promos(is_active);\n\nALTER TABLE public.member_promos ENABLE ROW LEVEL SECURITY;\n\n-- 10. Payment Methods Table\nCREATE TABLE IF NOT EXISTS public.payment_methods (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    method_name TEXT NOT NULL,\n    method_type TEXT NOT NULL,\n    is_active BOOLEAN NOT NULL DEFAULT true,\n    configuration JSONB,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),\n    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_payment_methods_tenant_id ON public.payment_methods(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_payment_methods_is_active ON public.payment_methods(is_active);\n\nALTER TABLE public.payment_methods ENABLE ROW LEVEL SECURITY;\n\n-- 11. Customer Tags Table\nCREATE TABLE IF NOT EXISTS public.customer_tags (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),\n    customer_id BIGINT NOT NULL REFERENCES public.customers(id),\n    tag_name TEXT NOT NULL,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_customer_tags_tenant_id ON public.customer_tags(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_customer_tags_customer_id ON public.customer_tags(customer_id);\nCREATE INDEX IF NOT EXISTS idx_customer_tags_tag_name ON public.customer_tags(tag_name);\n\nALTER TABLE public.customer_tags ENABLE ROW LEVEL SECURITY;\n\n-- 12. Error Logs Table\nCREATE TABLE IF NOT EXISTS public.error_logs (\n    id BIGSERIAL PRIMARY KEY,\n    tenant_id BIGINT REFERENCES public.tenants(id),\n    error_type TEXT NOT NULL,\n    error_message TEXT NOT NULL,\n    stack_trace TEXT,\n    user_id BIGINT,\n    request_path TEXT,\n    request_method TEXT,\n    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now()\n);\n\nCREATE INDEX IF NOT EXISTS idx_error_logs_tenant_id ON public.error_logs(tenant_id);\nCREATE INDEX IF NOT EXISTS idx_error_logs_error_type ON public.error_logs(error_type);\nCREATE INDEX IF NOT EXISTS idx_error_logs_created_at ON public.error_logs(created_at);",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 2: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 2 column 17 near \"BIGSERIAL PRIMARY KEY,",
    "    tenant_id BIGINT NOT NULL REFERENCES public.tenants(id),",
    "    customer_id BIGINT NOT NULL REFERENCES public.customers(id),",
    "    weight DECIMAL(5, 2) NOT NULL,",
    "    unit TEXT NOT NULL DEFAULT 'kg',",
    "    recorded_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),",
    "    notes TEXT,",
    "    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(),"
  ]
}